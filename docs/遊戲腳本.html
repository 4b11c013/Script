<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>遊戲腳本</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", "微軟正黑體", Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
            border-bottom: 3px solid #333;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #ccc;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        h3 {
            color: #777;
            margin-top: 20px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 15px 0;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        pre {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            padding: 15px;
            overflow-x: auto;
            font-family: "Consolas", "Courier New", monospace;
            font-size: 12px;
        }
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
        .header-info {
            text-align: center;
            margin-bottom: 30px;
        }
         hr {
             border: none;
             border-top: 1px solid #ccc;
             margin: 20px 0;
         }
         .flowchart {
             font-family: "Microsoft JhengHei", "微軟正黑體", Arial, sans-serif;
             margin: 30px 0;
         }
         .flow-box {
             background: #ffffff;
             color: #333;
             padding: 15px 20px;
             border: 2px solid #333;
             border-radius: 4px;
             margin: 15px auto;
             text-align: center;
             box-shadow: 0 2px 4px rgba(0,0,0,0.1);
             max-width: 300px;
             font-weight: bold;
         }
         .flow-box.start {
             border: 3px solid #333;
         }
         .flow-box.loading {
             border: 2px solid #666;
         }
         .flow-box.menu {
             border: 2px solid #666;
         }
         .flow-box.game {
             border: 2px solid #666;
         }
         .flow-box.loop {
             border: 2px solid #333;
             max-width: 500px;
         }
         .flow-box.decision {
             background: #f5f5f5;
             color: #333;
             border: 3px solid #333;
             max-width: 250px;
             border-radius: 50px;
         }
         .flow-box.end {
             border: 2px solid #666;
         }
         .flow-arrow {
             text-align: center;
             font-size: 24px;
             color: #333;
             margin: 10px 0;
             font-weight: bold;
         }
         .flow-arrow.small {
             font-size: 18px;
             margin: 5px 0;
         }
         .flow-label {
             text-align: center;
             font-size: 12px;
             color: #666;
             margin: 5px 0;
             font-style: italic;
         }
         .flow-row {
             display: flex;
             justify-content: center;
             align-items: flex-start;
             gap: 20px;
             margin: 20px 0;
             flex-wrap: wrap;
         }
         .flow-column {
             display: flex;
             flex-direction: column;
             align-items: center;
         }
         .flow-sub-box {
             background: #f8f9fa;
             border: 1px solid #ccc;
             padding: 12px 15px;
             border-radius: 4px;
             margin: 8px 0;
             text-align: left;
             max-width: 280px;
             color: #333;
         }
         .flow-sub-box h4 {
             margin: 0 0 8px 0;
             color: #333;
             font-size: 14px;
             font-weight: bold;
         }
         .flow-sub-box ul {
             margin: 5px 0;
             padding-left: 20px;
             font-size: 12px;
         }
         .flow-sub-box li {
             margin: 3px 0;
         }
         .flow-branch {
             display: flex;
             justify-content: space-around;
             align-items: flex-start;
             gap: 30px;
             margin: 20px 0;
             flex-wrap: wrap;
         }
         .flow-branch-item {
             display: flex;
             flex-direction: column;
             align-items: center;
             flex: 1;
             min-width: 200px;
         }
         .flow-branch-label {
             font-size: 12px;
             color: #333;
             margin: 5px 0;
             font-weight: bold;
         }
    </style>
</head>
<body>
    <div class="header-info">
        <h1>遊戲腳本</h1>
        <p><strong>互動藝術程式創作</strong><br>
        <strong>任課教師：馮於悲</strong></p>
    </div>

    <hr>

    <h2>一、遊戲基本資料</h2>
    <ul>
        <li><strong>名稱</strong>：3D 射擊遊戲（期末作業專案）</li>
        <li><strong>類型</strong>：第一人稱射擊類（FPS）</li>
        <li><strong>企劃</strong>：李幀民</li>
        <li><strong>製作人</strong>：李幀民</li>
        <li><strong>程式</strong>：李幀民</li>
        <li><strong>美術</strong>：李幀民</li>
        <li><strong>遊戲對象</strong>：12歲以上</li>
        <li><strong>遊戲目的</strong>：訓練手眼協調、反應速度、空間感知</li>
        <li><strong>預計完成日期</strong>：2026/01/07</li>
    </ul>

    <hr>

    <h2>二、遊戲規格</h2>
    
    <h3>畫面大小</h3>
    <ul>
        <li>全螢幕自適應</li>
    </ul>

    <h3>檔案大小限制</h3>
    <ul>
        <li>建議 10MB 內</li>
    </ul>

    <h3>Loading 畫面</h3>
    <ul>
        <li>顯示載入進度百分比和進度條</li>
        <li>載入完成後進入主選單</li>
    </ul>

    <h3>玩法規則</h3>
    <ol>
        <li><strong>操作</strong>：WASD 移動、滑鼠轉視角、點擊射擊、R 重裝、M 音效開關</li>
        <li><strong>生命</strong>：初始 100，被撞到扣血（小殭屍 5、中殭屍 8、大殭屍 15），歸零結束</li>
        <li><strong>敵人</strong>：維持場上 5 隻，分三種（小/中/大），自動追蹤玩家</li>
        <li><strong>彈藥</strong>：30 發，射擊冷卻 150ms，重裝 1.5 秒</li>
        <li><strong>分數</strong>：擊倒敵人加分，被攻擊扣分</li>
    </ol>

    <h3>分數計算</h3>
    <ul>
        <li>小殭屍：+5 分</li>
        <li>中殭屍：+15 分</li>
        <li>大殭屍：+50 分</li>
        <li>被攻擊：-（傷害值）分</li>
    </ul>

    <h3>評價</h3>
    <ul>
        <li>0-49：繼續努力！</li>
        <li>50-99：不錯喔！</li>
        <li>100-199：太厲害了！</li>
        <li>200+：神級表現！</li>
    </ul>

    <hr>

    <h2>三、故事包裝</h2>
    <p>在殭屍病毒感染的廢棄區域，玩家扮演倖存者，使用 M4 步槍對抗殭屍群，在有限資源下盡可能擊倒更多敵人獲得高分。</p>

    <hr>

    <h2>四、畫面說明</h2>
    
    <h3>Loading 畫面</h3>
    <ul>
        <li>載入進度條和百分比</li>
    </ul>

    <h3>主選單</h3>
    <ul>
        <li>遊戲標題、操作說明、點擊開始</li>
    </ul>

    <h3>遊戲畫面</h3>
    <ul>
        <li><strong>左上角 HUD</strong>：分數、生命值條、彈藥</li>
        <li><strong>右上角 HUD</strong>：時間、敵人數、音效狀態</li>
        <li><strong>中央</strong>：綠色十字準心</li>
        <li><strong>右下角</strong>：M4 步槍模型</li>
        <li><strong>場景</strong>：3D 地板、敵人、子彈</li>
    </ul>

    <hr>

    <h2>五、流程圖</h2>
    
    <div class="flowchart">
        <!-- 開始 -->
        <div class="flow-box start">開始</div>
        <div class="flow-arrow">↓</div>
        
        <!-- Loading 畫面 -->
        <div class="flow-box loading">Loading 畫面</div>
        <div class="flow-sub-box">
            <ul>
                <li>載入 3D 模型（M4 槍枝）</li>
                <li>異步載入所有音效檔案</li>
                <li>顯示載入進度</li>
            </ul>
        </div>
        <div class="flow-arrow">↓</div>
        <div class="flow-label">載入完成</div>
        
        <!-- 主選單 -->
        <div class="flow-box menu">主選單</div>
        <div class="flow-sub-box">
            <ul>
                <li>顯示遊戲標題和說明</li>
                <li>等待玩家點擊開始</li>
                <li>點擊後啟動音頻上下文</li>
            </ul>
        </div>
        <div class="flow-arrow">↓</div>
        <div class="flow-label">點擊滑鼠</div>
        
        <!-- 遊戲開始 -->
        <div class="flow-box game">遊戲開始</div>
        <div class="flow-sub-box">
            <ul>
                <li>重置所有遊戲變數</li>
                <li>生成初始 5 隻敵人</li>
                <li>請求滑鼠鎖定（第一人稱視角）</li>
            </ul>
        </div>
        <div class="flow-arrow">↓</div>
        
        <!-- 遊戲主迴圈 -->
        <div class="flow-box loop">遊戲主迴圈（每幀執行）</div>
        
        <div class="flow-row">
            <div class="flow-column">
                <div class="flow-sub-box">
                    <h4>1. 玩家輸入處理</h4>
                    <ul>
                        <li>鍵盤輸入（WASD、R、M）</li>
                        <li>滑鼠移動（視角控制）</li>
                        <li>滑鼠點擊（射擊）</li>
                    </ul>
                </div>
                <div class="flow-arrow small">↓</div>
            </div>
        </div>
        
        <div class="flow-row">
            <div class="flow-column">
                <div class="flow-sub-box">
                    <h4>2. 遊戲邏輯更新</h4>
                    <ul>
                        <li>更新玩家位置</li>
                        <li>更新敵人位置（追蹤玩家）</li>
                        <li>更新子彈位置</li>
                        <li>檢測碰撞（子彈-敵人、敵人-玩家）</li>
                        <li>處理敵人死亡和生成</li>
                        <li>更新生命值、分數、時間</li>
                    </ul>
                </div>
                <div class="flow-arrow small">↓</div>
            </div>
        </div>
        
        <div class="flow-row">
            <div class="flow-column">
                <div class="flow-sub-box">
                    <h4>3. 畫面渲染</h4>
                    <ul>
                        <li>繪製 3D 場景</li>
                        <li>繪製敵人（帶血量條）</li>
                        <li>繪製子彈</li>
                        <li>繪製 HUD 介面</li>
                        <li>繪製準心和槍枝</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="flow-arrow">↓</div>
        
        <!-- 判斷生命值 -->
        <div class="flow-box decision">生命值 <= 0？</div>
        
        <div class="flow-branch">
            <div class="flow-branch-item">
                <div class="flow-branch-label">是</div>
                <div class="flow-arrow small">↓</div>
                <div class="flow-box end">遊戲結束</div>
                <div class="flow-sub-box">
                    <ul>
                        <li>顯示最終分數</li>
                        <li>顯示存活時間</li>
                        <li>顯示評價</li>
                    </ul>
                </div>
                <div class="flow-arrow small">↓</div>
                <div class="flow-sub-box">
                    <h4>選擇操作</h4>
                    <ul>
                        <li>點擊滑鼠 → 回到主選單</li>
                        <li>按 R 鍵 → 直接重新開始</li>
                    </ul>
                </div>
            </div>
            
            <div class="flow-branch-item">
                <div class="flow-branch-label">否</div>
                <div class="flow-arrow small">↓</div>
                <div class="flow-box game">繼續遊戲</div>
                <div class="flow-label">（回到遊戲主迴圈）</div>
            </div>
        </div>
    </div>

    <h3>詳細流程說明</h3>
    
    <p><strong>1. 初始化階段</strong></p>
    <ul>
        <li>載入 3D 模型（M4 槍枝）</li>
        <li>異步載入所有音效檔案</li>
        <li>顯示載入進度</li>
    </ul>

    <p><strong>2. 主選單階段</strong></p>
    <ul>
        <li>顯示遊戲標題和說明</li>
        <li>等待玩家點擊開始</li>
        <li>點擊後啟動音頻上下文</li>
    </ul>

    <p><strong>3. 遊戲開始</strong></p>
    <ul>
        <li>重置所有遊戲變數（分數、生命、彈藥等）</li>
        <li>生成初始 5 隻敵人</li>
        <li>請求滑鼠鎖定（第一人稱視角）</li>
    </ul>

    <p><strong>4. 遊戲主迴圈（每幀執行）</strong></p>
    <ul>
        <li><strong>玩家輸入處理</strong>：
            <ul>
                <li>鍵盤輸入（WASD、R、M）</li>
                <li>滑鼠移動（視角控制）</li>
                <li>滑鼠點擊（射擊）</li>
            </ul>
        </li>
        <li><strong>遊戲邏輯更新</strong>：
            <ul>
                <li>更新玩家位置</li>
                <li>更新敵人位置（追蹤玩家）</li>
                <li>更新子彈位置</li>
                <li>檢測碰撞（子彈-敵人、敵人-玩家）</li>
                <li>處理敵人死亡和生成</li>
                <li>更新生命值、分數、時間</li>
            </ul>
        </li>
        <li><strong>畫面渲染</strong>：
            <ul>
                <li>繪製 3D 場景</li>
                <li>繪製敵人（帶血量條）</li>
                <li>繪製子彈</li>
                <li>繪製 HUD 介面</li>
                <li>繪製準心和槍枝</li>
            </ul>
        </li>
    </ul>

    <p><strong>5. 遊戲結束判斷</strong></p>
    <ul>
        <li>每幀檢查生命值</li>
        <li>生命值 <= 0 時進入結束畫面</li>
    </ul>

    <p><strong>6. 遊戲結束畫面</strong></p>
    <ul>
        <li>顯示最終分數、存活時間、評價</li>
        <li>提供兩個選項：
            <ul>
                <li>點擊滑鼠 → 回到主選單</li>
                <li>按 R 鍵 → 直接重新開始遊戲</li>
            </ul>
        </li>
    </ul>

    <hr>

    <h2>六、音效清單</h2>
    <table>
        <thead>
            <tr>
                <th>事件</th>
                <th>檔案名稱</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>槍聲</td>
                <td>shot.mp3</td>
            </tr>
            <tr>
                <td>擊中</td>
                <td>hit.mp3</td>
            </tr>
            <tr>
                <td>殭屍中槍</td>
                <td>僵屍中槍.mp3</td>
            </tr>
            <tr>
                <td>受傷</td>
                <td>male hurt.mp3</td>
            </tr>
            <tr>
                <td>重裝</td>
                <td>reload.mp3</td>
            </tr>
            <tr>
                <td>殭屍吼叫</td>
                <td>zombie_growl.mp3</td>
            </tr>
        </tbody>
    </table>

    <hr>

    <h2>七、美術需求</h2>
    
    <h3>風格</h3>
    <ul>
        <li>3D 寫實風格，科幻/恐怖元素</li>
    </ul>

    <h3>角色</h3>
    <ul>
        <li><strong>主角</strong>：第一人稱視角，只看得到 M4 步槍</li>
        <li><strong>敵人</strong>：3D 方塊（小/中/大，不同顏色），頭頂血量條</li>
    </ul>

    <h3>場景</h3>
    <ul>
        <li>大型 3D 空間，深綠色格線地板，暗色調</li>
    </ul>

    <h3>UI</h3>
    <ul>
        <li>綠色十字準心、半透明 HUD、生命值條（綠→黃→紅）</li>
    </ul>

    <hr>

    <h2>八、程式需求</h2>
    <ol>
        <li><strong>載入</strong>：p5.js preload() 載入模型，異步載入音效</li>
        <li><strong>3D 渲染</strong>：WEBGL 模式，第一人稱攝影機</li>
        <li><strong>碰撞檢測</strong>：距離檢測（子彈-敵人、敵人-玩家）</li>
        <li><strong>AI</strong>：敵人追蹤玩家，維持場上 5 隻</li>
        <li><strong>音效</strong>：M 鍵開關，載入失敗用合成音效</li>
    </ol>

    <hr>

    <h2>九、回饋畫面</h2>
    
    <h3>遊戲結束</h3>
    <ul>
        <li>顯示分數、存活時間、評價</li>
        <li>點擊滑鼠回選單，R 鍵重玩</li>
    </ul>

    <hr>

    <h2>十、其他備註</h2>
    <ul>
        <li><strong>技術</strong>：p5.js + Three.js，WEBGL 渲染</li>
        <li><strong>限制</strong>：音效需用戶互動才能播放</li>
        <li><strong>未來</strong>：多關卡、道具系統、Boss 戰</li>
    </ul>

</body>
</html>

